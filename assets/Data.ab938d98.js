import{G as be,a as d,b as y,o as w,j as ie,H as Oe,c as i,I as G,i as r,d as C,k as ke,s as $,S as T,F as $e,e as Pe,f as Ee,t as v,A as ze,B as Ie,J as q}from"./index.afb3ae88.js";async function Ae(n){let e="";return n.zip_code.forEach(s=>e+="zip_code="+s.id+"&"),n.type.forEach(s=>e+="type="+s.id+"&"),n.pollutant.forEach(s=>e+="pollutant="+s.id+"&"),(await(await fetch(`https://mrapid-api3-r2oaltsiuq-uc.a.run.app/sensor?${e}`)).json()).SensorList}async function Ne(n){let e="";return console.log(n),(await(await fetch(`https://mrapid-api3-r2oaltsiuq-uc.a.run.app/history?${e}`)).json()).results}const Fe=n=>{const e=be({multiple:!1,disabled:!1,optionToValue:o=>o,isOptionDisabled:o=>!1},n),l=o=>{if(e.multiple&&Array.isArray(o))return o;if(!e.multiple&&!Array.isArray(o))return o!==null?[o]:[];throw new Error(`Incompatible value type for ${e.multiple?"multple":"single"} select.`)},[t,s]=d(e.initialValue!==void 0?l(e.initialValue):[]),a=()=>e.multiple?t():t()[0]||null,c=o=>s(l(o)),p=()=>s([]),V=()=>!!(e.multiple?a().length:a());y(w(t,()=>e.onChange?.(a()),{defer:!0}));const[f,_]=d(""),J=()=>_(""),j=()=>!!f().length;y(w(f,o=>e.onInput?.(o),{defer:!0})),y(w(f,o=>{o&&!m()&&h(!0)},{defer:!0}));const E=typeof e.options=="function"?ie(()=>e.options(f()),e.options(f())):()=>e.options,Z=()=>E().length,z=o=>{if(e.isOptionDisabled(o))return;const S=e.optionToValue(o);e.multiple?c([...t(),S]):(c(S),D(!1)),h(!1)},[K,D]=d(!1),[m,h]=d(!1),B=()=>h(!m()),[O,x]=d(-1),b=()=>E()[O()],Q=o=>o===b(),M=o=>{Z()||x(-1);const S=Z()-1,F=o==="next"?1:-1;let P=O()+F;P>S&&(P=0),P<0&&(P=S),x(P)},U=()=>M("previous"),k=()=>M("next");y(w(E,o=>{m()&&x(Math.min(0,o.length-1))},{defer:!0})),y(w(()=>e.disabled,o=>{o&&m()&&h(!1)})),y(w(m,o=>{o?(O()===-1&&k(),D(!0)):(O()>-1&&x(-1),_(""))},{defer:!0})),y(w(O,o=>{o>-1&&!m()&&h(!0)},{defer:!0}));const W=()=>D(!0),I=()=>{D(!1),h(!1)},A=o=>o.preventDefault(),Y=o=>{!e.disabled&&!j()&&B()},X=o=>{_(o.target.value)},N=o=>{switch(o.key){case"ArrowDown":k();break;case"ArrowUp":U();break;case"Enter":if(m()&&b()){z(b());break}return;case"Escape":if(m()){h(!1);break}return;case"Delete":case"Backspace":if(f())return;if(e.multiple){const S=a();c([...S.slice(0,-1)])}else p();break;case" ":if(f())return;m()?b()&&z(b()):h(!0);break;case"Tab":if(b()&&m()){z(b());break}return;default:return}o.preventDefault(),o.stopPropagation()};return{options:E,value:a,setValue:c,hasValue:V,clearValue:p,inputValue:f,setInputValue:_,hasInputValue:j,clearInputValue:J,isOpen:m,setIsOpen:h,toggleOpen:B,isActive:K,setIsActive:D,get multiple(){return e.multiple},get disabled(){return e.disabled},pickOption:z,isOptionFocused:Q,isOptionDisabled:e.isOptionDisabled,onFocusIn:W,onFocusOut:I,onMouseDown:A,onClick:Y,onInput:X,onKeyDown:N}},Te=v("<div></div>",2),Le=v('<div class="solid-select-control"></div>',2),Me=v('<div class="solid-select-placeholder"></div>',2),je=v('<div class="solid-select-single-value"></div>',2),Ze=v('<div class="solid-select-multi-value"><button type="button" class="solid-select-multi-value-remove">\u2A2F</button></div>',4),Be=v('<input class="solid-select-input" type="text" tabindex="0" autocomplete="off" autocapitalize="none" size="1">',1),qe=v('<div class="solid-select-list"></div>',2),ve=v('<div class="solid-select-list-placeholder"></div>',2),Re=v('<div class="solid-select-option"></div>',2),_e=ze(),L=()=>{const n=Ie(_e);if(!n)throw new Error("No SelectContext found in ancestry.");return n},R=n=>{const[e,l]=Oe(be({format:(s,a)=>s,placeholder:"Select...",readonly:typeof n.options!="function",loading:!1,loadingPlaceholder:"Loading...",emptyPlaceholder:"No options"},n),["options","optionToValue","isOptionDisabled","multiple","disabled","onInput","onChange"]),t=Fe(e);return y(w(()=>l.initialValue,s=>s!==void 0&&t.setValue(s))),i(_e.Provider,{value:t,get children(){return i(Ge,{get class(){return l.class},get children(){return[i(He,{get id(){return l.id},get name(){return l.name},get format(){return l.format},get placeholder(){return l.placeholder},get autofocus(){return l.autofocus},get readonly(){return l.readonly}}),i(We,{get loading(){return l.loading},get loadingPlaceholder(){return l.loadingPlaceholder},get emptyPlaceholder(){return l.emptyPlaceholder},get format(){return l.format}})]}})}})},Ge=n=>{const e=L();return(()=>{const l=Te.cloneNode(!0);return l.$$mousedown=t=>{e.onMouseDown(t),t.currentTarget.getElementsByTagName("input")[0].focus()},G(l,"focusout",e.onFocusOut,!0),G(l,"focusin",e.onFocusIn,!0),r(l,()=>n.children),C(t=>{const s=`solid-select-container ${n.class!==void 0?n.class:""}`,a=e.disabled;return s!==t._v$&&ke(l,t._v$=s),a!==t._v$2&&$(l,"data-disabled",t._v$2=a),t},{_v$:void 0,_v$2:void 0}),l})()},He=n=>{const e=L(),l=t=>{const s=e.value();e.setValue([...s.slice(0,t),...s.slice(t+1)])};return(()=>{const t=Le.cloneNode(!0);return G(t,"click",e.onClick,!0),r(t,i(T,{get when(){return ie(()=>!e.hasValue())()&&!e.hasInputValue()},get children(){return i(Je,{get children(){return n.placeholder}})}}),null),r(t,i(T,{get when(){return ie(()=>!!(e.hasValue()&&!e.multiple))()&&!e.hasInputValue()},get children(){return i(Ke,{get children(){return n.format(e.value(),"value")}})}}),null),r(t,i(T,{get when(){return e.hasValue()&&e.multiple},get children(){return i($e,{get each(){return e.value()},children:(s,a)=>i(Qe,{onRemove:()=>l(a()),get children(){return n.format(s,"value")}})})}}),null),r(t,i(Ue,{get id(){return n.id},get name(){return n.name},get autofocus(){return n.autofocus},get readonly(){return n.readonly}}),null),C(s=>{const a=e.multiple,c=e.hasValue(),p=e.disabled;return a!==s._v$3&&$(t,"data-multiple",s._v$3=a),c!==s._v$4&&$(t,"data-has-value",s._v$4=c),p!==s._v$5&&$(t,"data-disabled",s._v$5=p),s},{_v$3:void 0,_v$4:void 0,_v$5:void 0}),t})()},Je=n=>(()=>{const e=Me.cloneNode(!0);return r(e,()=>n.children),e})(),Ke=n=>(()=>{const e=je.cloneNode(!0);return r(e,()=>n.children),e})(),Qe=n=>(L(),(()=>{const e=Ze.cloneNode(!0),l=e.firstChild;return r(e,()=>n.children,l),l.$$click=t=>{t.stopPropagation(),n.onRemove()},e})()),Ue=n=>{const e=L();return(()=>{const l=Be.cloneNode(!0);return l.$$mousedown=t=>{t.stopPropagation()},l.$$keydown=t=>{e.onKeyDown(t),t.defaultPrevented||t.key==="Escape"&&(t.preventDefault(),t.stopPropagation(),t.target.blur())},G(l,"input",e.onInput,!0),C(t=>{const s=n.id,a=n.name,c=e.multiple,p=e.isActive(),V=n.autofocus,f=n.readonly,_=e.disabled;return s!==t._v$6&&$(l,"id",t._v$6=s),a!==t._v$7&&$(l,"name",t._v$7=a),c!==t._v$8&&$(l,"data-multiple",t._v$8=c),p!==t._v$9&&$(l,"data-is-active",t._v$9=p),V!==t._v$10&&(l.autofocus=t._v$10=V),f!==t._v$11&&(l.readOnly=t._v$11=f),_!==t._v$12&&(l.disabled=t._v$12=_),t},{_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0,_v$10:void 0,_v$11:void 0,_v$12:void 0}),C(()=>l.value=e.inputValue()),l})()},We=n=>{const e=L();return i(T,{get when(){return e.isOpen()},get children(){const l=qe.cloneNode(!0);return r(l,i(T,{get when(){return!n.loading},get fallback(){return(()=>{const t=ve.cloneNode(!0);return r(t,()=>n.loadingPlaceholder),t})()},get children(){return i($e,{get each(){return e.options()},get fallback(){return(()=>{const t=ve.cloneNode(!0);return r(t,()=>n.emptyPlaceholder),t})()},children:t=>i(Ye,{option:t,get children(){return n.format(t,"option")}})})}})),l}})},Ye=n=>{const e=L(),l=t=>{y(()=>{e.isOptionFocused(n.option)&&t.scrollIntoView({block:"nearest"})})};return(()=>{const t=Re.cloneNode(!0);return t.$$click=()=>e.pickOption(n.option),Pe(l,t),r(t,()=>n.children),C(s=>{const a=e.isOptionDisabled(n.option),c=e.isOptionFocused(n.option);return a!==s._v$13&&$(t,"data-disabled",s._v$13=a),c!==s._v$14&&$(t,"data-focused",s._v$14=c),s},{_v$13:void 0,_v$14:void 0}),t})()};Ee(["focusin","focusout","mousedown","click","input","keydown"]);const Xe=v('<div class="flex flex-1 flex-col max-w-100 gap-3"><label for="sensor">Select sensors</label></div>',4),et=v('<form><h3>Filter Sensors</h3><label><input type="checkbox"></label><div class="flex flex-1 flex-col max-w-100 gap-3"><label for="zip_code">Filter sensors by zip code</label></div><label><input type="checkbox"></label><div class="flex flex-1 flex-col max-w-100 gap-3"><label for="type">Filter sensors by monitor type</label></div><label><input type="checkbox"></label><div class="flex flex-1 flex-col max-w-100 gap-3"><label for="pollutant">Filter sensors by pollutant</label></div><h3>Select Sensors</h3><h3>Filter Sensor Data </h3><label class="data-form-item">Start time/date<input type="date" name="start-time" class="text-input"></label><label class="data-form-item">End time/date<input type="date" name="end-time" class="text-input"></label><label class="data-form-item">Time step<select class="select"><option value="h">Hourly</option><option value="d">Daily</option><option value="m">Monthly</option><option value="y">Yearly</option></select></label></form>',47),H=(n,e)=>({id:n,name:e});async function tt(){const e=await(await fetch("https://mrapid-api3-r2oaltsiuq-uc.a.run.app/zipcodes")).json();let l=[];for(let t=0;t<e.zipcode_list.length;t++)l.push(H(e.zipcode_list[t].zip_code,e.zipcode_list[t].zip_code));return l}async function nt(){const e=await(await fetch("https://mrapid-api3-r2oaltsiuq-uc.a.run.app/parameterList")).json();let l=[];for(let t=0;t<e.results.length;t++)l.push(H(e.results[t].name,e.results[t].displayName));return l}function lt(){const n=[],e=[],l=[],[t,s]=d(n),[a,c]=d(e),[p,V]=d(l),[f,_]=d([]),[J,j]=d(""),[E,Z]=d(""),[z,K]=d(""),D=u=>{K(u.currentTarget.value),x()},m=()=>({zip_code:t(),type:a(),pollutant:p()}),[h]=q(m,Ae),B=u=>{_(u),h()},O=()=>({zip_code:t(),pollutant:p()}),[x]=q(O,Ne),[b]=q(tt),Q=u=>{s(u),b()},M=[H("DST","dst full name"),H("OAQ","open air quality")],U=u=>{c(u)},[k]=q(nt),W=u=>{V(u),k()},I=(u,ee)=>u.name,[A,Y]=d({text:"Select all zip codes",complete:!1}),X=()=>{Y({...A,complete:!A.complete}),s(b),b()},[N,o]=d({text:"Select all monitor types",complete:!1}),S=()=>{o({...N,complete:!N.complete}),c(M)},[F,P]=d({text:"Select all pollutant types",complete:!1}),Se=()=>{P({...F,complete:!F.complete}),V(k),k()};return(()=>{const u=et.cloneNode(!0),ee=u.firstChild,te=ee.nextSibling,re=te.firstChild,ne=te.nextSibling;ne.firstChild;const le=ne.nextSibling,ce=le.firstChild,se=le.nextSibling;se.firstChild;const oe=se.nextSibling,ue=oe.firstChild,ae=oe.nextSibling;ae.firstChild;const ye=ae.nextSibling,de=ye.nextSibling,pe=de.nextSibling,xe=pe.firstChild,fe=xe.nextSibling,me=pe.nextSibling,we=me.firstChild,he=we.nextSibling,Ce=me.nextSibling,Ve=Ce.firstChild,ge=Ve.nextSibling;return re.addEventListener("change",X),r(te,()=>A().text,null),r(ne,i(R,{class:"search",id:"zip_code",multiple:!0,get initialValue(){return t()},label:"Select sensors",placeholder:"Search by zip code",onChange:Q,format:I,options:b,isOptionDisabled:g=>t().length!=0?t().includes(g):!1}),null),ce.addEventListener("change",S),r(le,()=>N().text,null),r(se,i(R,{class:"search",id:"type",multiple:!0,label:"Select sensors",placeholder:"Search by monitor type",get initialValue(){return a()},onChange:U,format:I,options:M,isOptionDisabled:g=>a().length!=0?a().includes(g):!1}),null),ue.addEventListener("change",Se),r(oe,()=>F().text,null),r(ae,i(R,{class:"search",id:"pollutant",multiple:!0,get initialValue(){return p()},label:"Select sensors",placeholder:"Search by pollutant",onChange:W,format:I,options:k,isOptionDisabled:g=>p().length!=0?p().includes(g):!1}),null),r(u,i(T,{get when(){return!h.loading},get fallback(){return"Searching..."},get children(){const g=Xe.cloneNode(!0);return g.firstChild,r(g,i(R,{class:"search",id:"sensor",multiple:!0,label:"sensor selector",placeholder:"Search for specific sensors",onChange:B,format:I,options:h,isOptionDisabled:De=>f().length!=0?f().includes(De):!1}),null),g}}),de),fe.addEventListener("change",g=>{j(g.currentTarget.value),x()}),fe.value=J,he.addEventListener("change",g=>{Z(g.currentTarget.value),x()}),he.value=E,ge.addEventListener("change",D),ge.value=z,C(()=>re.checked=A().complete),C(()=>ce.checked=N().complete),C(()=>ue.checked=F().complete),u})()}const st=v("<div></div>",2),ot=v('<section class="page-data"><div class="data-form"><form><h1>Download sensor data</h1><label class="data-form-item" for="downloadSubmit"><button id="downloadSubmit" type="submit" name="submit" class="icon-btn btn-secondary">Download</button></label></form></div><div class="data-image-container"><h3>Map of Detroit Zip Codes</h3><div class="data-image"><img src="/src/assets/detroitmap.jpg" alt="map of detroit zipcodes"></div>For a complete list of MI zip codes, refer to this <a href="https://www.michigan.gov/dtmb/-/media/Project/Websites/dtmb/Services/GIS/Static-Maps/Boundaries/ZIPCodeMap_LP102209.pdf?rev=ef32903cd06c47688b6f3978263a40f4&amp;hash=FB40296EEACD32BC792E28F054C0E47D" target="_blank" rel="noopener noreferrer">document</a>.</div></section>',21),at=[];function it(){const[n]=d(at);return(()=>{const e=st.cloneNode(!0);return r(e,i(lt,{setSensors:n})),e})()}const ct=()=>(()=>{const n=ot.cloneNode(!0),e=n.firstChild,l=e.firstChild,t=l.firstChild,s=t.nextSibling;return r(l,i(it,{name:"Solid"}),s),n})();export{ct as default};
